<!DOCTYPE html>

<script>
function add_note(form) {
	const url = "http://localhost:5000/add-note"
	const xhr = new XMLHttpRequest()
	const content = JSON.stringify({content: document.getElementById("content").value})
	xhr.open("POST", url, true)
	xhr.setRequestHeader("Content-Type", "application/json")
	xhr.setRequestHeader("Access-Control-Allow-Origin", "*")
	xhr.send(content)
	xhr.onreadystatechange = (e) => {
		console.log(xhr.responseText)
	}
}

function get_notes() {
	const url = "http://localhost:5000/get-notes"
	const xhr = new XMLHttpRequest()
	xhr.open("GET", url, false)
	xhr.setRequestHeader("Content-Type", "application/json")
	xhr.setRequestHeader("Access-Control-Allow-Origin", "*")
	xhr.send()
	const response = xhr.responseText
	console.log(response)
	document.body.innerHTML += "<ul>"
	for (const note of response) {
		console.log(note)
		document.body.innerHTML += "<li>"
	}
	document.body.innerHTML += "</ul>"
}
</script>

<html>
	<head>
		<title>Note manager (HTML version)</title>
	</head>
	<body>
	<h1>Note manager (HTML version)</h1>
	<h2>Add new note</h2>
		<form name="new-note" action="javascript:add_note(this.form)">Note:
			<input type="text" id="content" name="content">
			<input type="submit" value="Submit">
		</form>
	</body>
	<h2>All notes</h2>

	<script>
	get_notes()
	</script>

</html>
